Для того, чтобы развернуть проект понадобится:

1. Docker
2. VSCode
3. Dbeaver 

**Шаг 1**. Создать папку для проекта в удобной директории.

**Шаг 2**. Открыть созданную папку с помощью VSCode. Запустить терминал. В терминале ввести команду `docker pull eg0r24/kaggle-repository:kaggle-image-v2025-06-01-r2` , чтобы скачать докер-образ проекта.

**Шаг 3**. В терминале VSCode запустить команду `git clone https://github.com/Egor152/elama_project.git` , чтобы скачать код проекта.

**Шаг 4**. Используйте команду `cd elama_project` , чтобы перейти в папку проекта.

**Шаг 5**. Введите команду `docker compose up -d --build` для сборки образа и запуска контейнера, согласно файлу docker-compose.yaml.

**Шаг 6**. Подождите запуска контейнера. Должны запуститься все сервисы:

![[Pasted image 20250107105525.png]]

**Шаг 7**. В браузере в адресной строке введите `http://localhost:8080/`  - запуститься airflow-webserver. Логин - `airflow`, пароль - `airflow`.

**Шаг 8**. Зайдите в `Admin` - > `Connections`

![[Pasted image 20250107112758.png]]


Создайте подключение в Airflow с такими параметрами и нажмите "Save". Параметры подключения:

| Connection_id   | pg_connect |
| --------------- | ---------- |
| Connection Type | Postgres   |
| **Host**        | postgres   |
| Database        | airflow    |
| Login           | airflow    |
| Password        | airflow    |
| **Port**        | 5432       |
![[Pasted image 20250107112843.png]]


**Шаг 9**. Запустите Dbeaver. Создайте подключение к Postgres.

Для этого нужно нажать на кнопку "Новое соединение" в левом верхнем углу.

![[Pasted image 20250107113333.png]]

В меню подключений выбрать "PostgreSQL", щелкнув по нему дважды, либо нажав "Далее"

![[Pasted image 20250107113400.png]]

У Вас на экране откроется окно создания подключения. Введите данные со скриншота или таблицы

![[Pasted image 20250107114955.png]]

| **Хост**    | localhost |
| ----------- | --------- |
| База данных | airflow   |
| Логин       | airflow   |
| Пароль      | airflow   |
| **Порт**    | 15432     |

**Шаг 10**. Перейдите в DAGs в UI Airflow. В списке DAG-ов нажмите на "kaggle_dag". Нажмите кнопку "Trigger DAG" в правом верхнем углу

![[Pasted image 20250107111117.png]]

**Шаг 11**. Дождитесь пока все задачи будут выполнены (зеленые). 

![[Pasted image 20250107111158.png]]

**Шаг 12**. Зайдите в Dbeaver для проверки БД.

В списке слева должно быть подключение к БД "Airflow", в ней должна быть схема "stg". В схеме "stg" будет таблица "adv". 

![[Pasted image 20250107111547.png]]

Вы можете открыть таблицу двойным нажатием на ее название. И у вас откроется таблица "adv":

![[Pasted image 20250107111629.png]]



